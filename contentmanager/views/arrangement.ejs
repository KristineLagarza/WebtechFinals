<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html;
      charset=UTF-8">
        <base href=".">

        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0,
      shrink-to-fit=no">
        <title>Dashboard</title>
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage"
            content="assets/favicon/ms-icon-144x144.png">
        <meta name="theme-color" content="#ffffff">

        <link rel="stylesheet" href="/assets/simplebar.css">
        <link rel="stylesheet" href="/assets/simplebar(1).css">

        <link href="/assets/style.css" rel="stylesheet">

        <link rel="stylesheet" href="/assets/prism.css">
        <link href="/assets/examples.css" rel="stylesheet">
        <script type="text/javascript" async src="/assets/js"></script>
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css">
        <style>
                .sidebar {
                    --cui-sidebar-bg: #0e284f !important;
                }
                .footer {
    background-color: #457B9D;
    color: white;
    padding: 20px 20px; /* Adjust the padding as needed */
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    bottom: 0;
    width: 100%;
    height: 172px;

}
.footer-image {
    display: inherit;
  }

  .footer-image img {
    width: 100%;
    height: 100px;
    padding-right: 10px;
  }

  footer h5 {
    color: black;
    font-size: 20px;
    font-weight: bolder;
    letter-spacing: 1px;
    padding-right: 20px;
  }

  .footer-right {
    border-left: 5px solid black;
    height: 100px;
    padding-left: 20px;
    text-align: left;
    font-size: 25px;
  }
        </style>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    </head>
    <body>
        <div class="sidebar sidebar-dark sidebar-fixed" id="sidebar">
            <div class="sidebar-brand d-none d-md-flex">
                <h4 class="sidebar-brand-full"> Content Management</h4>
                <h5 class="sidebar-brand-narrow"> Content Management</h5>
            </div>
            <ul class="sidebar-nav" data-coreui="navigation"
                data-simplebar="init"><div
                    class="simplebar-wrapper" style="margin: 0px;"><div
                        class="simplebar-height-auto-observer-wrapper"><div
                            class="simplebar-height-auto-observer"></div></div><div
                        class="simplebar-mask"><div class="simplebar-offset"
                            style="right:
              0px; bottom: 0px;"><div class="simplebar-content-wrapper"
                                tabindex="0" role="region"
                                aria-label="scrollable content"
                                style="height: 100%; overflow: hidden scroll;"><div
                                    class="simplebar-content"
                                    style="padding: 0px;">
                                    <li class="nav-item"><a
                                            class="nav-link"
                                            href="/dashboard">
                                            <i
                                                class="nav-icon zmdi zmdi-view-dashboard"></i>
                                            Dashboard</a></li>
                                    <li class="nav-item"><a
                                            class="nav-link active"
                                            href="/arrangement">
                                            <i class="nav-icon zmdi zmdi-link"></i>
                                            Arrangement</a></li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/upload">
                                            <i
                                                class="nav-icon zmdi zmdi-widgets"></i>
                                            Upload
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/live">
                                            <i
                                                class="nav-icon zmdi zmdi-calendar"></i>
                                            Live Stream
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/history">
                                            <i
                                                class="nav-icon zmdi zmdi-format-list-bulleted"></i>
                                            History
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link"
                                            href="/record">
                                            <i
                                                class="nav-icon zmdi zmdi-mic"></i>
                                            Record
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link"
                                            href="/duration">
                                            <i
                                                class="nav-icon zmdi zmdi-time-interval"></i>
                                            Air Time
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/logout">
                                            <i
                                                class="nav-icon zmdi zmdi-sign-in"></i>
                                            Log Out
                                        </a>
                                    </li>
                                </div></div></div></div><div
                        class="simplebar-placeholder"
                        style="width: 256px; height: 841px;"></div></div><div
                    class="simplebar-track simplebar-horizontal"
                    style="visibility:
          hidden;"><div class="simplebar-scrollbar" style="width: 0px; display:
            none;"></div></div><div class="simplebar-track simplebar-vertical"
                    style="visibility: visible;"><div
                        class="simplebar-scrollbar"
                        style="height: 247px; transform: translate3d(0px, 0px, 0px);
            display: block;"></div></div></ul>
        </div>
        <div class="wrapper d-flex flex-column min-vh-100 bg-light">
            <header class="header header-sticky mb-4">
                <div class="container-fluid">
                    <a class="header-brand d-md-none">
                        <i class="zmdi zmdi-menu"></i></a>
                    <ul class="header-nav d-none d-md-flex">
                    </ul>
                    <ul class="header-nav ms-auto">
                        <li class="nav-item"><a class="nav-link"
                                href>
                                <svg class="icon icon-lg">
                                    <use
                                        xlink:href="vendors/@coreui/icons/svg/free.svg#cil-bell"></use>
                                </svg></a></li>
                        <li class="nav-item"><a class="nav-link"
                                href>
                                <svg class="icon icon-lg">
                                    <use
                                        xlink:href="vendors/@coreui/icons/svg/free.svg#cil-list-rich"></use>
                                </svg></a></li>
                        <li class="nav-item"><a class="nav-link"
                                href>
                                <svg class="icon icon-lg">
                                    <use
                                        xlink:href="vendors/@coreui/icons/svg/free.svg#cil-envelope-open"></use>
                                </svg></a></li>
                    </ul>
                    <ul class="header-nav ms-3">
                        <li class="nav-item"><a class="nav-link"
                                href="#"><i
                                    class="icon me-2 zmdi zmdi-notifications text-danger"></i></a></li>
                        <li class="nav-item"><a class="nav-link"
                                href>Manager</a></li>
                    </ul>
                </div>
            </header>
            <div class="body flex-grow-1 px-3">
                <div class="container-lg">
                    <div class="row">
                        <form id="myForm" action="/arrangement" method="post"
                            enctype="application/x-www-form-urlencoded"
                            onsubmit="return false">
                            <div class="col-lg-12 mb-2">
                                <h1 class="centered-text">VIDEOS TO SHOW AND
                                    DURATION</h1>
                                <button class="btn btn-primary" id="btnSave"
                                    onclick="saveArrangement()">Save</button>
                                <button class="btn btn-info text-white"
                                    id="btnShowList"
                                    type="clear" data-coreui-toggle="modal"
                                    data-coreui-target="#showListModal">Show
                                    List</button>
                                <br>
                                <br>
                                <label for="air-times">Select Air Time:</label>
                                <select class="form-control" id="air-times"
                                    style="padding: 10px;" name="from">
                                    <% durations.forEach(function(row) { %>
                                    <option value="<%= row.durationID %>"><%=
                                        row.description %></option>
                                    <% }); %>
                                </select>
                            </div>
                            <div class="col-lg-12">
                                <label for="title">Title:</label>
                                <br>
                                <input class="form-control" type="text"
                                    name="title" id>
                            </div>
                            <div class="col-lg-12">
                                <label for="description">Description:</label>
                                <br>
                                <input class="form-control" type="text"
                                    name="description" id>
                            </div>
                        </div>
                        <div class="row" style="padding: 10px;">
                            <div class="col-lg-6" style="float: left;">
                                <% uploadedVideos.forEach(function(row) { %>
                                <label>
                                    <input type="checkbox"
                                        name="selectedVideos"
                                        value="<%= row.historyID %>">
                                    <%= row.fileName %>
                                    <span><button class="btn btn-primary"
                                            id="btnShow"
                                            onclick="showPreview('<%= row.fileName %>')">Show
                                            Preview</button></span>
                                </label><br><br>
                                <% }); %>
                            </div>
                        </form>
                        <div class="col-lg-6"
                            style="float: left;height:500px;">
                            <div
                                class="embed-responsive embed-responsive-1by1">
                                <iframe id="myFrame"
                                    class="embed-responsive-item"
                                    src></iframe>
                            </div>
                            <button class="btn btn-danger" id="btnClear"
                                style="display: none;"
                                onclick="clearPreview()">Clear</button>
                        </div>

                    </div>

                </div>
            </div>
        </div>
        <div class="modal fade "
            id="showListModal" tabindex="-1"
            role="dialog"
            aria-labelledby="showListModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title"
                            id="showListModalLabel">
                            List of Arrangements
                        </h5>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card mb-4">
                                    <div class="card-body">
                                        <br>
                                        <div class="table-responsive">
                                            <table class="table border mb-0">
                                                <thead
                                                    class="table-light fw-semibold">
                                                    <tr class="align-middle">
                                                        <th>
                                                            Title
                                                        </th>
                                                        <th>
                                                            Description
                                                        </th>
                                                        <th>
                                                            Air Time
                                                        </th>
                                                        <th>
                                                            Video Link
                                                        </th>
                                                        <th>
                                                            Action
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <%
                                                    list.forEach(function(row) {
                                                    %>
                                                    <tr>
                                                        <td><%= row.Title %></td>
                                                        <td><%= row.Description
                                                            %></td>
                                                        <td><%= row.ShowTime %></td>
                                                        <td><a target="_blank"
                                                                href="/playVideo/<%= row.fileName %>">Video
                                                                Preview</a></td>
                                                        <td>
                                                            <form
                                                                action="/arrangement"
                                                                method="POST"
                                                                enctype="application/x-www-form-urlencoded">
                                                                <input
                                                                    type="hidden"
                                                                    name="durationID"
                                                                    value="<%= row.durationID %>">
                                                                <button
                                                                    type="submit"
                                                                    class="btn btn-danger text-white"
                                                                    name="btnDeleteArrange"
                                                                    value="<%= row.ContentID %>">
                                                                    <i
                                                                        class="zmdi zmdi-delete"></i>
                                                                </button>
                                                            </form>
                                                        </td>
                                                    </tr>
                                                    <% }); %>
                                                </tbody>
                                            </table>

                                        </div>
                                    </div>
                                    <div class="card-footer"></div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button"
                                class="btn btn-secondary"
                                data-coreui-dismiss="modal"
                                style="color:white !important;">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
         <footer class ="footer">
        <div class="footer-image">
            <img src="images/favicon.png" alt="Singko">
        </div>
        <h5>&copy;  2023 Singko. All Rights Reserved</h5>
        <div class="footer-right">
          <h6>Team Singko - 9481AB - IT312/312L</h6>
          <h6>AY 2023-2024</h6>
          <h6>IT Department</h6>
          <h6>School of Accountancy, Management, Computing and Information Studies</h6>
          <h6>Saint Louis University</h6>
        </div>
    </footer>
        <script src="/assets/coreui.bundle.min.js.download"></script>
        <script src="/assets/simplebar.min.js.download"></script>
        <script src="/assets/coreui-utils.js.download"></script>
        <script src="/assets/main.js.download"></script>
        <script>
            function showPreview(fileName){
                let myForm = document.getElementById('myForm');
                myForm.removeAttribute("onsubmit");
                myForm.setAttribute("onsubmit","return false");
                if(fileName){
                    let myFrame = document.getElementById('myFrame');
                    myFrame.setAttribute("src",`/playVideo/${fileName}`);
                    myFrame.setAttribute("style","height:300px;width:500px;margin-bottom:5px;");
                    let btnClear = document.getElementById('btnClear');
                    btnClear.removeAttribute("style");
                    btnClear.setAttribute("style","color:white !important;");
                }
            }
            function clearPreview(){
                let myFrame = document.getElementById('myFrame');
                myFrame.setAttribute("src",'');
                myFrame.removeAttribute("style");
                let btnClear = document.getElementById('btnClear');
                btnClear.removeAttribute("style");
                btnClear.setAttribute("style","display:none");
            }

            function saveArrangement(){
                let myForm = document.getElementById('myForm');
                myForm.removeAttribute("onsubmit");
                let btnSave = document.getElementById('btnSave');
                btnSave.click();
            }
        </script> durations
        <% if (durations.length===0) { %>
        <script>
             var jsArrangeError = '<%= arrangeError %>';
                Swal.fire({
                title: 'Warning',
                text: "There Are No Air Time Added yet, Please Add First",
                icon: 'warning',
                showConfirmButton: false,
                timer: 1500
                })
            </script>
        <% } %>
        <% if (uploadedVideos.length===0) { %>
        <script>
             var jsArrangeError = '<%= arrangeError %>';
                Swal.fire({
                title: 'Warning',
                text: "There are no uploaded videos yet",
                icon: 'warning',
                showConfirmButton: false,
                timer: 1500
                })
            </script>
        <% } %>

        <% if (typeof arrangeError !== 'undefined' && arrangeError !== null) {
        %>
        <script>
                 var jsArrangeError = '<%= arrangeError %>';
                    Swal.fire({
                    title: 'Error',
                    text: jsArrangeError,
                    icon: 'error',
                    showConfirmButton: false,
                    timer: 1500
                    })
                </script>
        <% } %>

        <% if (typeof arrangeSuccess !== 'undefined' &&
        arrangeSuccess
        !==null) { %>
        <script>
                Swal.fire({
                title: 'Success',
                text: 'Successfully Added Arrangement',
                icon: 'success',
                showConfirmButton: false,
                timer: 1500
                })
            </script>
        <% } %>

        <% if (typeof deleteSuccess !== 'undefined' &&
        deleteSuccess
        !==null) { %>
        <script>
                Swal.fire({
                title: 'Success',
                text: 'Successfully Deleted Arrangement',
                icon: 'success',
                showConfirmButton: false,
                timer: 1500
                })
            </script>
        <% } %>
    </body>
</html>